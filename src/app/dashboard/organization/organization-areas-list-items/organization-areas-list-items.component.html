<ng-container *ngIf="responsibleMembers$ | async as responsibleMembers">
  <td>{{area.name}}</td>
  <td>
    <ng-container *ngIf="responsibleMembers.length">
      <span *ngFor="let responsibleMember of responsibleMembers">
        {{responsibleMember.user.name}} {{responsibleMember.user.last_name}}
      </span>
    </ng-container>
    <ng-container *ngIf="!responsibleMembers.length">
      <span>
        (sin asignar)
      </span>
    </ng-container>
  </td>
  <td>{{areaMembers}}</td>
  <td class="text-exito">{{area.created_at | date:'dd-MM-yyyy'}}</td>
  <td class="text-peligro">{{area.deleted_at | date:'dd-MM-yyyy'}}</td>
  <ng-container *ngIf="organization$ | async as organization">
    <td class="d-flex justify-content-end align-items-center">

      <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Acciones">
        <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <ng-container *ngIf="organization.created_by._id === user._id && !organization.deleted_at">
          <button mat-menu-item (click)="selectArea(area)">
            <mat-icon>arrow_forward</mat-icon>
            <span>Ingresar al área</span>
          </button>
          <button *ngIf="!area.deleted_at" mat-menu-item (click)="updateArea(area)">
            <mat-icon>create</mat-icon>
            <span>Editar nombre</span>
          </button>
          <button *ngIf="!area.deleted_at" mat-menu-item (click)="deleteArea(area)">
            <mat-icon>delete</mat-icon>
            <span>Dar de baja</span>
          </button>
          <button *ngIf="area.deleted_at" mat-menu-item (click)="activateArea(area)">
            <mat-icon>history</mat-icon>
            <span>Restaurar</span>
          </button>
        </ng-container>

        <ng-container *ngFor="let responsibleMember of responsibleMembers">

          <button mat-menu-item
            *ngIf="responsibleMember.user._id === user._id && organization.created_by._id !== user._id && !organization.deleted_at"
            (click)="selectArea(area)">
            <mat-icon>arrow_forward</mat-icon>
            <span>Ingresar al área</span>
          </button>
        </ng-container>
      </mat-menu>
    </td>
  </ng-container>
</ng-container>
